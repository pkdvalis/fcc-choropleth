(function (d3$1) {
  'use strict';

  //let educationURL =
  //  'https://cdn.freecodecamp.org/testable-projects-fcc/data/choropleth_map/for_user_education.json';

  //let countiesURL =
  //  'https://cdn.freecodecamp.org/testable-projects-fcc/data/choropleth_map/counties.json';

  d3.json('counties.json').then((countiesData) => {
    d3.json(
      'education.json'
    ).then((educationData) =>
      chartme(countiesData, educationData)
    );
  });

  const chartme = (cd, ed) => {

    //convert topojson to geojson
    let shapes = topojson.feature(
      cd,
      cd.objects.counties
    ).features;

    // set the dimensions and margins of the graph
    let width = 960,
      height = 500;

    // append the svg object to the body of the page
    let svg = d3
      .select('#choropleth')
      .append('svg')
      .attr('width', width)
      .attr('height', height)
      .attr('viewBox', '0 0 900 700');

    //console.log(countyData, ed)

    // create a tooltip
    let tooltip = d3
      .select("#choropleth")
      .append("div")
      .style("opacity", 0)
      .attr("class", "tooltip")
      .attr("id", "tooltip")
      .style("background-color", "white")
      .style("border", "solid")
      .style("border-width", "2px")
      .style("border-radius", "5px")
      .style("padding", "5px");

    // Three function that change the tooltip when user hover / move / leave a cell
    let mouseover = function (e, d) {
      tooltip.style("opacity", 1);
      d3.select(this).style("stroke", "black").style("opacity", 1);
    };
    let mousemove = function (countyid) {
      let county = ed.find((v, i) => countyid == ed[i].fips);
      tooltip
        .html(county.area_name + ", " + 
             	county.state + ": " +
             	county.bachelorsOrHigher + "%")
        .attr("data-education", county.bachelorsOrHigher)
        .style("top", event.pageY - 10 + "px")
        .style("left", event.pageX + 10 + "px");
    };
    let mouseleave = function (e, d) {
      tooltip.style("opacity", 0);
      d3.select(this).style("stroke", "none").style("opacity", 0.8);
    };
    
    
    svg
      .selectAll('path')
      .data(shapes)
      .enter()
      .append('path')
      .attr('d', d3.geoPath())
      .attr('class', 'county')
      .attr('fill', (county) => {
        let num = ed.find(
          (d, i) => county.id == ed[i].fips
        );
        let base = 45 / 4;
        if (num.bachelorsOrHigher < base) return '#2F4858';
        if (num.bachelorsOrHigher < base * 2) return '#86BBD8';
        if (num.bachelorsOrHigher < base * 3) return '#F6AE2D';
        return '#F26419';
      })
    	.attr('data-fips', (county) => county.id)
    	.attr('data-education', (county) => ed.find((d, i) => county.id == ed[i].fips).bachelorsOrHigher)
      .on("mouseover", mouseover)
      .on("mousemove", (county) => mousemove(county.id))
      .on("mouseleave", mouseleave);
  };

  /* 
  This line uses D3 to set the text of the message div.
  select('#message').text(message);
  const f = 5;

  const reged = /fdass/g;
  */

}(d3));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNlbGVjdCwganNvbiB9IGZyb20gJ2QzJztcblxuLy9sZXQgZWR1Y2F0aW9uVVJMID1cbi8vICAnaHR0cHM6Ly9jZG4uZnJlZWNvZGVjYW1wLm9yZy90ZXN0YWJsZS1wcm9qZWN0cy1mY2MvZGF0YS9jaG9yb3BsZXRoX21hcC9mb3JfdXNlcl9lZHVjYXRpb24uanNvbic7XG5cbi8vbGV0IGNvdW50aWVzVVJMID1cbi8vICAnaHR0cHM6Ly9jZG4uZnJlZWNvZGVjYW1wLm9yZy90ZXN0YWJsZS1wcm9qZWN0cy1mY2MvZGF0YS9jaG9yb3BsZXRoX21hcC9jb3VudGllcy5qc29uJztcblxuZDMuanNvbignY291bnRpZXMuanNvbicpLnRoZW4oKGNvdW50aWVzRGF0YSkgPT4ge1xuICBkMy5qc29uKFxuICAgICdlZHVjYXRpb24uanNvbidcbiAgKS50aGVuKChlZHVjYXRpb25EYXRhKSA9PlxuICAgIGNoYXJ0bWUoY291bnRpZXNEYXRhLCBlZHVjYXRpb25EYXRhKVxuICApO1xufSk7XG5cbmNvbnN0IGNoYXJ0bWUgPSAoY2QsIGVkKSA9PiB7XG5cbiAgLy9jb252ZXJ0IHRvcG9qc29uIHRvIGdlb2pzb25cbiAgbGV0IHNoYXBlcyA9IHRvcG9qc29uLmZlYXR1cmUoXG4gICAgY2QsXG4gICAgY2Qub2JqZWN0cy5jb3VudGllc1xuICApLmZlYXR1cmVzO1xuXG4gIC8vIHNldCB0aGUgZGltZW5zaW9ucyBhbmQgbWFyZ2lucyBvZiB0aGUgZ3JhcGhcbiAgbGV0IHdpZHRoID0gOTYwLFxuICAgIGhlaWdodCA9IDUwMDtcblxuICAvLyBhcHBlbmQgdGhlIHN2ZyBvYmplY3QgdG8gdGhlIGJvZHkgb2YgdGhlIHBhZ2VcbiAgbGV0IHN2ZyA9IGQzXG4gICAgLnNlbGVjdCgnI2Nob3JvcGxldGgnKVxuICAgIC5hcHBlbmQoJ3N2ZycpXG4gICAgLmF0dHIoJ3dpZHRoJywgd2lkdGgpXG4gICAgLmF0dHIoJ2hlaWdodCcsIGhlaWdodClcbiAgICAuYXR0cigndmlld0JveCcsICcwIDAgOTAwIDcwMCcpO1xuXG4gIC8vY29uc29sZS5sb2coY291bnR5RGF0YSwgZWQpXG5cbiAgLy8gY3JlYXRlIGEgdG9vbHRpcFxuICBsZXQgdG9vbHRpcCA9IGQzXG4gICAgLnNlbGVjdChcIiNjaG9yb3BsZXRoXCIpXG4gICAgLmFwcGVuZChcImRpdlwiKVxuICAgIC5zdHlsZShcIm9wYWNpdHlcIiwgMClcbiAgICAuYXR0cihcImNsYXNzXCIsIFwidG9vbHRpcFwiKVxuICAgIC5hdHRyKFwiaWRcIiwgXCJ0b29sdGlwXCIpXG4gICAgLnN0eWxlKFwiYmFja2dyb3VuZC1jb2xvclwiLCBcIndoaXRlXCIpXG4gICAgLnN0eWxlKFwiYm9yZGVyXCIsIFwic29saWRcIilcbiAgICAuc3R5bGUoXCJib3JkZXItd2lkdGhcIiwgXCIycHhcIilcbiAgICAuc3R5bGUoXCJib3JkZXItcmFkaXVzXCIsIFwiNXB4XCIpXG4gICAgLnN0eWxlKFwicGFkZGluZ1wiLCBcIjVweFwiKTtcblxuICAvLyBUaHJlZSBmdW5jdGlvbiB0aGF0IGNoYW5nZSB0aGUgdG9vbHRpcCB3aGVuIHVzZXIgaG92ZXIgLyBtb3ZlIC8gbGVhdmUgYSBjZWxsXG4gIGxldCBtb3VzZW92ZXIgPSBmdW5jdGlvbiAoZSwgZCkge1xuICAgIHRvb2x0aXAuc3R5bGUoXCJvcGFjaXR5XCIsIDEpO1xuICAgIGQzLnNlbGVjdCh0aGlzKS5zdHlsZShcInN0cm9rZVwiLCBcImJsYWNrXCIpLnN0eWxlKFwib3BhY2l0eVwiLCAxKTtcbiAgfTtcbiAgbGV0IG1vdXNlbW92ZSA9IGZ1bmN0aW9uIChjb3VudHlpZCkge1xuICAgIGxldCBjb3VudHkgPSBlZC5maW5kKCh2LCBpKSA9PiBjb3VudHlpZCA9PSBlZFtpXS5maXBzKVxuICAgIHRvb2x0aXBcbiAgICAgIC5odG1sKGNvdW50eS5hcmVhX25hbWUgKyBcIiwgXCIgKyBcbiAgICAgICAgICAgXHRjb3VudHkuc3RhdGUgKyBcIjogXCIgK1xuICAgICAgICAgICBcdGNvdW50eS5iYWNoZWxvcnNPckhpZ2hlciArIFwiJVwiKVxuICAgICAgLmF0dHIoXCJkYXRhLWVkdWNhdGlvblwiLCBjb3VudHkuYmFjaGVsb3JzT3JIaWdoZXIpXG4gICAgICAuc3R5bGUoXCJ0b3BcIiwgZXZlbnQucGFnZVkgLSAxMCArIFwicHhcIilcbiAgICAgIC5zdHlsZShcImxlZnRcIiwgZXZlbnQucGFnZVggKyAxMCArIFwicHhcIik7XG4gIH07XG4gIGxldCBtb3VzZWxlYXZlID0gZnVuY3Rpb24gKGUsIGQpIHtcbiAgICB0b29sdGlwLnN0eWxlKFwib3BhY2l0eVwiLCAwKTtcbiAgICBkMy5zZWxlY3QodGhpcykuc3R5bGUoXCJzdHJva2VcIiwgXCJub25lXCIpLnN0eWxlKFwib3BhY2l0eVwiLCAwLjgpO1xuICB9O1xuICBcbiAgXG4gIHN2Z1xuICAgIC5zZWxlY3RBbGwoJ3BhdGgnKVxuICAgIC5kYXRhKHNoYXBlcylcbiAgICAuZW50ZXIoKVxuICAgIC5hcHBlbmQoJ3BhdGgnKVxuICAgIC5hdHRyKCdkJywgZDMuZ2VvUGF0aCgpKVxuICAgIC5hdHRyKCdjbGFzcycsICdjb3VudHknKVxuICAgIC5hdHRyKCdmaWxsJywgKGNvdW50eSkgPT4ge1xuICAgICAgbGV0IG51bSA9IGVkLmZpbmQoXG4gICAgICAgIChkLCBpKSA9PiBjb3VudHkuaWQgPT0gZWRbaV0uZmlwc1xuICAgICAgKTtcbiAgICAgIGxldCBiYXNlID0gNDUgLyA0O1xuICAgICAgaWYgKG51bS5iYWNoZWxvcnNPckhpZ2hlciA8IGJhc2UpIHJldHVybiAnIzJGNDg1OCc7XG4gICAgICBpZiAobnVtLmJhY2hlbG9yc09ySGlnaGVyIDwgYmFzZSAqIDIpIHJldHVybiAnIzg2QkJEOCc7XG4gICAgICBpZiAobnVtLmJhY2hlbG9yc09ySGlnaGVyIDwgYmFzZSAqIDMpIHJldHVybiAnI0Y2QUUyRCc7XG4gICAgICByZXR1cm4gJyNGMjY0MTknO1xuICAgIH0pXG4gIFx0LmF0dHIoJ2RhdGEtZmlwcycsIChjb3VudHkpID0+IGNvdW50eS5pZClcbiAgXHQuYXR0cignZGF0YS1lZHVjYXRpb24nLCAoY291bnR5KSA9PiBlZC5maW5kKChkLCBpKSA9PiBjb3VudHkuaWQgPT0gZWRbaV0uZmlwcykuYmFjaGVsb3JzT3JIaWdoZXIpXG4gICAgLm9uKFwibW91c2VvdmVyXCIsIG1vdXNlb3ZlcilcbiAgICAub24oXCJtb3VzZW1vdmVcIiwgKGNvdW50eSkgPT4gbW91c2Vtb3ZlKGNvdW50eS5pZCkpXG4gICAgLm9uKFwibW91c2VsZWF2ZVwiLCBtb3VzZWxlYXZlKTtcbn07XG5cbi8qIFxuVGhpcyBsaW5lIHVzZXMgRDMgdG8gc2V0IHRoZSB0ZXh0IG9mIHRoZSBtZXNzYWdlIGRpdi5cbnNlbGVjdCgnI21lc3NhZ2UnKS50ZXh0KG1lc3NhZ2UpO1xuY29uc3QgZiA9IDU7XG5cbmNvbnN0IHJlZ2VkID0gL2ZkYXNzL2c7XG4qL1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztFQUVBO0VBQ0E7QUFDQTtFQUNBO0VBQ0E7QUFDQTtFQUNBLEVBQUUsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsWUFBWSxLQUFLO0VBQ2hELEVBQUUsRUFBRSxDQUFDLElBQUk7RUFDVCxJQUFJLGdCQUFnQjtFQUNwQixHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsYUFBYTtFQUN2QixJQUFJLE9BQU8sQ0FBQyxZQUFZLEVBQUUsYUFBYSxDQUFDO0VBQ3hDLEdBQUcsQ0FBQztFQUNKLENBQUMsQ0FBQyxDQUFDO0FBQ0g7RUFDQSxNQUFNLE9BQU8sR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLEtBQUs7QUFDNUI7RUFDQTtFQUNBLEVBQUUsSUFBSSxNQUFNLEdBQUcsUUFBUSxDQUFDLE9BQU87RUFDL0IsSUFBSSxFQUFFO0VBQ04sSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLFFBQVE7RUFDdkIsR0FBRyxDQUFDLFFBQVEsQ0FBQztBQUNiO0VBQ0E7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